<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Jua&family=Lobster&family=Nanum+Pen+Script&family=Single+Day&display=swap"
        rel="stylesheet">
    <style>
        body,
        body * {
            font-family: 'Single Day';
        }

        div.loginbox table tr {
            height: 40px;
        }

        div.loginbox table * {
            font-size: 20px;
        }

        /*table 밑 모든 하위 태그*/
    </style>
    <script>
        window.onload = function () {
            // document.getElementById("chksave").onchange=function(){
            //     if(this.checked)
            //         {let id=document.getElementById("txtid").value;
            //         localStorage.setItem("loginid", id);}
            //     else localaStorage.removeItem("loginid");
            // }
            //아이디가 저장된 배열변수
            let memberid = ["bit701", "angel", "happy", "nice", "java"];
            let memberpass = ["1234", "0000", "1357", "9999", "8888"];


            //처음 로딩 시 저장된 아이디와 체크값을 얻는다
            let loginid = localStorage.loginid;
            let idcheck = localStorage.idcheck;

            //체크값이 만약 true면 id의 값을 넣어주고, 체크도 설정한다
            //체크값이 만약 false면 아이디 값을 지우고 체크도 해제한다
            if (idcheck == null || idcheck == 'false') {
                //체크 속성 제거
                document.getElementById("chksave").removeAttribute("checked");
                //아이디도 지우기
                document.getElementById("txtid").value = "";
            }
            else {
                //체크 속성 추가, 체크하면 true가 되게끔 바꿔줌
                document.getElementById("chksave").setAttribute("checked", true);
                //document.getElementById("chksave").setAttribute.checked =true);
                //아이디도 넣기
                document.getElementById("txtid").value = loginid;

            }
            //로그인 버튼
            document.getElementById("btnlogin").onclick = function () {
                //아이디랑 비번을 얻는다
                let id = document.getElementById("txtid").value;
                let pass = document.getElementById("txtpass").value;

                let idcheck = document.getElementById("chksave").checked;


            //     var v = 1;
            //     var idx=-1;
            //     var v1 = 1;
            //     var v2 = 1;

            //     //배열로 들어간 아이디 비밀번호 확인하기
            //     for (var i = 0; i < memberid.length; i++) {
            //         if (id == memberid[i] && pass == memberpass[i]) {
            //             v = 0;
            //             location.href = "canvas.html";
            //             localStorage.idcheck = idcheck;
            //             localStorage.loginid = id;

            //         }

            //     }
            //     if (v != 0) {
            //         for (var i = 0; i < memberid.length; i++) {
            //             if (id == memberid[i]) {
            //                 v1 = 0;
            //             }
            //         }
            //         if (v1 != 0) {
            //             alert('아이디를 잘못 입력했습니다.');
            //             document.getElementById("txtid").value = "";
            //         }

            //         for (var i = 0; i < memberid.length; i++) {
            //             if (pass == memberpass[i]) {
            //                 v2 = 0;
            //             }
            //         }
            //         if (v2 != 0) {
            //             alert('비밀번호를 잘못 입력했습니다.');
                        
            //         }

            //     }
            // }

            let ididx=-1;
            for(let i=0; i<memberid.length;i++){
                if(id==memberid[i]){
                    ididx=i;
                    break;
                }
            }
            if(ididx==-1){
                alert("회원이 아닙니다");
            }else{
                if(pass==memberpass[ididx]){
                    location.href="ex1_canvas.html";
                    localStorage.idcheck=idcheck;
                    localStorage.loginid=id;
                }else{
                    alert("비번이 맞지 않습니다.");
                }
            }





            // if(id=='bit701' && pass=='1234'){
            //     //페이지 이동
            //     location.href="canvas.html";
            //     localStorage.idcheck=idcheck;
            //     localStorage.loginid=id;
            // }
            // else {
            //     alert("아이디 또는 비번이 틀렸어요");
            // }
            }}

        
    </script>
</head>

<body>
    <div class="loginbox">
        <table border="1" style="border-collapse: collapse;">
            <caption><b>회원 로그인</b></caption>
            <tr>
                <th colspan="2">
                    <label>
                        <input type="checkbox" id="chksave">아이디 저장
                    </label>
                </th>
            </tr>
            <tr>
                <th bgcolor="lightgray" width="100">아이디</th>
                <td width="200">
                    <input type="text" id="txtid" placeholder="아이디" autofocus>
                </td>
            </tr>

            <tr>
                <th bgcolor="lightgray" width="100">비밀번호</th>
                <td width="200">
                    <input type="password" id="txtpass" placeholder="비밀번호">
                </td>
            </tr>
            <tr>
                <td colspan="2" align="center">
                    <button type="button" id="btnlogin">회원로그인</button>
                </td>
            </tr>
        </table>

    </div>
</body>

</html>